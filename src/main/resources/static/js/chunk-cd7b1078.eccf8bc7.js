(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-cd7b1078"],{"3b2a":function(e,t,a){"use strict";var l=a("ac24"),o=a.n(l);o.a},"3e8f":function(e,t){},ac24:function(e,t,a){},ddc3:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"table"},[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),e._v(" 用户管理\n      ")])],1)],1),a("div",{staticClass:"container"},[a("el-input",{staticClass:"username",attrs:{placeholder:"用户名"},model:{value:e.input,callback:function(t){e.input=t},expression:"input"}}),a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger"},on:{click:function(t){e.dialogTableVisible=!0}}},[e._v("新增")]),a("el-button",{attrs:{type:"primary"}},[e._v("查询")]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"10px"},attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading",data:e.tableData,"row-class-name":e.tableRowClassName}},[a("el-table-column",{attrs:{prop:"userId",label:"序号",width:"180"}}),a("el-table-column",{attrs:{prop:"userName",label:"用户名",width:"180"}}),a("el-table-column",{attrs:{prop:"realname",label:"真实姓名"}}),a("el-table-column",{attrs:{prop:"department",label:"所属部门"}}),a("el-table-column",{attrs:{prop:"role",label:"所有权限"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDelete(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1),a("el-dialog",{attrs:{title:"新增用户",visible:e.dialogTableVisible},on:{"update:visible":function(t){e.dialogTableVisible=t}}},[a("el-form",{attrs:{model:e.user}},[a("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入用户名",autocomplete:"off"},model:{value:e.user.userName,callback:function(t){e.$set(e.user,"userName",t)},expression:"user.userName"}})],1),a("el-form-item",{attrs:{label:"用户密码","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入用户密码",autocomplete:"off"},model:{value:e.user.password,callback:function(t){e.$set(e.user,"password",t)},expression:"user.password"}})],1),a("el-form-item",{attrs:{label:"真实姓名","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入真实姓名",autocomplete:"off"},model:{value:e.user.realname,callback:function(t){e.$set(e.user,"realname",t)},expression:"user.realname"}})],1),a("el-form-item",{attrs:{label:"所属部门","label-width":e.formLabelWidth}},[a("el-cascader",{attrs:{placeholder:"输入部门",options:e.departments,filterable:"","change-on-select":!0},on:{change:e.selectAddDepartment}})],1),a("el-form-item",{attrs:{label:"所有权限","label-width":e.formLabelWidth}},e._l(e.roles,function(t){return a("el-radio-group",{key:t,on:{change:e.choosePermission},model:{value:e.user.role,callback:function(t){e.$set(e.user,"role",t)},expression:"user.role"}},[a("el-radio",{staticStyle:{"margin-right":"10px"},attrs:{label:t.groupName}},[e._v(e._s(t.groupName))])],1)}),1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTableVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.createUser}},[e._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"编辑用户",visible:e.dialogTableVisible1},on:{"update:visible":function(t){e.dialogTableVisible1=t}}},[a("el-form",{attrs:{model:e.updateuser}},[a("el-form-item",{attrs:{label:"用户名","label-width":e.formLabelWidth}},[a("el-input",{attrs:{readonly:"",placeholder:"请输入用户名",autocomplete:"off"},model:{value:e.updateuser.userName,callback:function(t){e.$set(e.updateuser,"userName",t)},expression:"updateuser.userName"}})],1),a("el-form-item",{attrs:{label:"用户密码","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入用户密码",autocomplete:"off"},model:{value:e.updateuser.password,callback:function(t){e.$set(e.updateuser,"password",t)},expression:"updateuser.password"}})],1),a("el-form-item",{attrs:{label:"真实姓名","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入真实姓名",autocomplete:"off"},model:{value:e.updateuser.realname,callback:function(t){e.$set(e.updateuser,"realname",t)},expression:"updateuser.realname"}})],1),a("el-form-item",{attrs:{label:"所属部门","label-width":e.formLabelWidth}},[a("el-cascader",{attrs:{placeholder:"输入部门",options:e.departments,filterable:"","change-on-select":!0},on:{change:e.selectEditDepartment}})],1),a("el-form-item",{attrs:{label:"所有权限","label-width":e.formLabelWidth}},e._l(e.roles,function(t){return a("el-radio-group",{key:t,on:{change:e.choosePermission},model:{value:e.updateuser.role,callback:function(t){e.$set(e.updateuser,"role",t)},expression:"updateuser.role"}},[a("el-radio",{staticStyle:{"margin-right":"10px"},attrs:{label:t.groupName}},[e._v(e._s(t.groupName))])],1)}),1),a("el-form-item",[a("el-switch",{staticStyle:{display:"block","margin-left":"7%"},attrs:{"active-color":"#13ce66","active-text":"解除锁定","inactive-text":"用户锁定"},on:{change:e.changeLock},model:{value:e.updateuser.islocked,callback:function(t){e.$set(e.updateuser,"islocked",t)},expression:"updateuser.islocked"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogTableVisible1=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.sendUpdateUser}},[e._v("确 定")])],1)],1)],1)},o=[],s=a("56d7"),r=(a("3e8f"),{inject:["reload"],mounted:function(){this.getAllPermissions(),this.getDepartmentsTree()},methods:{tableRowClassName:function(e){e.row;var t=e.rowIndex;return t%4===1?"warning-row":t%4===3?"success-row":""},handleEdit:function(e,t){console.log(t),this.dialogTableVisible1=!0,this.updateuser.userId=t.userId,this.updateuser.departmentId=this.departmentId,this.updateuser.userName=t.userName,this.updateuser.password=t.password,this.updateuser.role=t.role,this.updateuser.realname="高富帅","未锁定"==t.islocked?this.updateuser.islocked=!1:"已锁定"==t.islocked&&(this.updateuser.islocked=!0)},sendUpdateUser:function(){var e=this;Object(s["postJsonRequest"])("api/public/updateUserMessage",this.updateuser).then(function(t){console.log(t),e.reload()}).catch(function(e){}),this.dialogTableVisible1=!1},handleDelete:function(e,t){var a=this;console.log(t),console.log(t.userId);Object(s["postRequest"])("/api/public/deleteUser",{userId:t.userId}).then(function(e){console.log(e),200==e.data.code?a.reload():-1==e.data.code&&a.open6()}).catch(function(e){})},createUser:function(){var e=this;Object(s["postJsonRequest"])("/api/public/createUser",this.user).then(function(t){console.log(t),200==t.data.code?(e.open3(),e.dialogTableVisible=!1,e.reload()):-1==t.data.code&&e.open6()}).catch(function(e){})},selectAddDepartment:function(e){null!=e&&e.length>0&&(this.user.departmentId=e[e.length-1],console.log(this.user.departmentId),console.log("console.log(this.user.departmentId);"))},selectEditDepartment:function(e){null!=e&&e.length>0&&(this.updateuser.departmentId=e[e.length-1],console.log(this.user.departmentId),console.log("console.log(this.user.departmentId);"))},getDepartmentsTree:function(){var e=this;Object(s["getRequest"])("/api/admin/getAllDepartments").then(function(t){200===t.data.code?(e.departments=t.data.data,console.log("this.departments"),console.log(e.departments)):alert("获取失败")}).catch(function(e){console.log(e)})},choosePermission:function(){console.log(this.user.role)},handleCurrentChange:function(e){this.cur_page=e,this.getData()},changeLock:function(){console.log(this.value4)},getAllUserGroup:function(){},getData:function(){var e=this;console.log("hhhh");var t=this;Object(s["postRequest"])("/api/public/getAllUsers",{page:this.cur_page}).then(function(a){console.log(a),200===a.data.code?(t.tableData=a.data.data.list,t.total=a.data.data.total,e.loading=!1):a.data.code}).catch(function(e){console.log(e)})},getAllPermissions:function(){var e=this,t=[];Object(s["postJsonRequest"])("/api/getAllUserGroup").then(function(a){console.log(a);for(var l=0;l<a.data.data.length;l++)t.push(a.data.data[l]);e.roles=t}).catch(function(e){})},open6:function(){this.$notify.error({title:"错误",message:"无权限进行此操作"})},open7:function(){this.$notify.error({title:"错误",message:"用户已锁定"})},open3:function(){this.$notify({title:"成功",message:"这是一条成功的提示消息",type:"success"})}},created:function(){this.getData()},data:function(){return{value4:"100",roles:[],radio:1,dialogTableVisible:!1,dialogTableVisible1:!1,loading:!0,input:"",cur_page:1,total:1,formLabelWidth:"120px",tableData:[],user:{userName:"",password:"",realname:"",department:"",departmentId:"",role:""},departments:[],updateuser:{userId:"",userName:"",password:"",realname:"",department:"",role:"",islocked:""}}}}),n=r,i=(a("3b2a"),a("2877")),c=Object(i["a"])(n,l,o,!1,null,null,null);t["default"]=c.exports}}]);