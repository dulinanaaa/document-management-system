(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-547fde28"],{"0518":function(t,e,a){"use strict";var n=a("6670"),o=a.n(n);o.a},6670:function(t,e,a){},fd9e:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"main"},[a("div",[a("div",{staticClass:"crumbs"},[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-lx-cascades"}),t._v(" 标签管理\n        ")])],1)],1),a("div",{staticClass:"container"},[a("div",{staticClass:"drag-box"},[a("div",{staticClass:"drag-box-item"},[a("div",{staticClass:"item-title",staticStyle:{width:"200px"}},[t._v("分类目录")]),a("el-button",{staticStyle:{display:"flex","margin-left":"240px","margin-top":"-30px",height:"25px"},attrs:{type:"primary",size:"mini"},on:{click:function(e){t.dialogVisible=!0}}},[t._v("增加分类")]),a("el-tree",{ref:"tree",staticClass:"tree",staticStyle:{"margin-top":"10px"},attrs:{data:t.data,"node-key":"id","default-expand-all":"",draggable:"","filter-node-method":t.filterNode,"render-content":t.renderContent,"allow-drop":t.allowDrop,"allow-drag":t.allowDrag},on:{"node-drag-start":t.handleDragStart,"node-drag-enter":t.handleDragEnter,"node-drag-leave":t.handleDragLeave,"node-drag-over":t.handleDragOver,"node-drag-end":t.handleDragEnd,"node-drop":t.handleDrop}})],1),a("div",{staticClass:"drag-box-item"},[a("div",{staticClass:"item-title"},[t._v("标签管理")]),a("draggable",{attrs:{options:t.dragOptions},on:{remove:t.removeHandle},model:{value:t.doing,callback:function(e){t.doing=e},expression:"doing"}},[a("transition-group",{staticClass:"item-ul",attrs:{tag:"div",id:"doing"}},t._l(t.tags,function(e){return a("el-tag",{key:e.name,staticClass:"name",attrs:{size:"mini",closable:"",type:e.type},on:{close:function(a){return t.updateTag(e)}}},[t._v(t._s(e.name))])}),1)],1)],1),a("div",{staticClass:"drag-box-item"},[a("div",{staticClass:"item-title"},[t._v("废弃标签")]),a("draggable",{attrs:{options:t.dragOptions},on:{remove:t.removeHandle},model:{value:t.doing,callback:function(e){t.doing=e},expression:"doing"}},[a("transition-group",{staticClass:"item-ul",attrs:{tag:"div",id:"doing"}},t._l(t.tags1,function(e){return a("el-tag",{key:e.name,staticStyle:{height:"25px","margin-right":"5px","margin-bottom":"4px"},attrs:{size:"mini",type:e.type},on:{click:function(a){return t.updateTag(e)}}},[t._v(t._s(e.name))])}),1)],1)],1)]),a("el-dialog",{staticStyle:{"margin-top":"100px"},attrs:{title:"新增分类",visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-form",{attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"分类名:"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addRootLabel}},[t._v("确 定")])],1)],1),a("el-dialog",{staticStyle:{"margin-top":"100px"},attrs:{title:"新增分类",visible:t.dialogVisible1,width:"30%"},on:{"update:visible":function(e){t.dialogVisible1=e}}},[a("el-form",{attrs:{model:t.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"分类名:"}},[a("el-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible1=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.addLabel}},[t._v("确 定")])],1)],1),a("el-dialog",{attrs:{title:"提示",visible:t.dialogVisible2,width:"30%"},on:{"update:visible":function(e){t.dialogVisible2=e}}},[a("el-form",{attrs:{model:t.editform,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"分类名:"}},[a("el-input",{model:{value:t.editform.name,callback:function(e){t.$set(t.editform,"name",e)},expression:"editform.name"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible2=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.confimUpdate}},[t._v("确 定")])],1)],1)],1)])])},o=[],i=(a("7f7f"),a("1980")),l=a.n(i),s=a("56d7"),d={inject:["reload"],components:{draggable:l.a},watch:{filterText:function(t){this.$refs.tree.filter(t)}},data:function(){return{type:"",docLabelsTree:[],form:{name:""},editform:{name:"",type:""},nodeValue:"",dialogVisible:!1,dialogVisible1:!1,dialogVisible2:!1,filterText:"",tags:[],tags1:[],num:1,label:"",data:[{superId:0,children:[{superId:19,children:null,list:null,id:22,label:"表情包"},{superId:19,children:[{superId:26,children:null,list:null,id:27,label:"ppt素材"}],list:null,id:26,label:"透明素材"}],list:null,id:19,label:"图片"},{superId:0,children:null,list:null,id:20,label:"背景图"},{superId:0,children:null,list:null,id:21,label:"风景图"}],defaultProps:{children:"children",label:"label"},dragOptions:{animation:120,scroll:!0,group:"sortlist",ghostClass:"ghost-style"},todo:[{id:1,content:"开发图表组件"},{id:2,content:"开发拖拽组件"},{id:3,content:"开发权限测试组件"}],doing:[{id:1,content:"开发登录注册页面"},{id:2,content:"开发头部组件"},{id:3,content:"开发表格相关组件"},{id:4,content:"开发表单相关组件"}],done:[{id:1,content:"初始化项目，生成工程目录，完成相关配置"},{id:2,content:"开发项目整体框架"}]}},methods:{confimUpdate:function(){var t=this,e={id:this.nodeValue.id,label:this.editform.name,superId:this.nodeValue.superId};Object(s["postJsonRequest"])("/api/public/updateLabels",e).then(function(e){200!=e.data.code?t.$notify.error({title:"错误",message:e.data.msg}):(t.reload(),t.$notify.success({title:"成功",message:e.data.msg}))}).catch(function(t){})},addLabel:function(t,e){var a=this;console.log(this.form.name);var n={label:this.form.name,superId:this.nodeValue.id};console.log(n),Object(s["postJsonRequest"])("/api/public/addLabels",n).then(function(t){console.log(t),200!=t.data.code?a.$notify.error({title:"错误",message:t.data.msg}):200==t.data.code&&(a.reload(),a.$notify.success({title:"成功",message:t.data.msg}))}).catch(function(t){}),this.dialogVisible1=!1},addRootLabel:function(){var t=this;console.log(this.form.name);var e={label:this.form.name,superId:0};Object(s["postJsonRequest"])("/api/public/addLabels",e).then(function(e){console.log(e),200!=e.data.code?t.$notify.error({title:"错误",message:e.data.msg}):200==e.data.code&&(t.reload(),t.$notify.success({title:"成功",message:e.data.msg}))}).catch(function(t){}),this.dialogVisible=!1},open3:function(t){void 0==t&&(t="这是一条成功的提示消息"),this.$notify({title:"成功",message:t,type:"success"})},open6:function(t){void 0==t&&(t="这是一条错误的提示消息"),this.$notify.error({title:"错误",message:t})},addTag:function(t){console.log(t),console.log(t.data)},getDocLabelsTree:function(){var t=this;Object(s["getRequest"])("/api/public/getDocLabelsTree").then(function(e){200===e.data.code?(t.data=e.data.data,console.log(t.data)):console.log(e.data.msg)}).catch(function(t){console.log(t)})},removetag:function(){},getAllTags:function(){var t=this;Object(s["postJsonRequest"])("/api/public/getAllTags").then(function(e){for(var a=0;a<e.data.data.length;a++){var n={name:e.data.data[a].tagName,type:"success"};1==e.data.data[a].isuse?t.tags.push(n):t.tags1.push(n)}}).catch(function(t){})},updateTag:function(t){var e=this;this.$confirm("是否确认该操作","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(a){if("confirm"==a){console.log(t);var n={tagName:t.name};Object(s["postJsonRequest"])("/api/public/updateTag",n).then(function(t){e.reload(),e.$notify.success({title:"提示",message:t.data.msg})}).catch(function(t){})}}).catch(function(t){})},filterNode:function(t,e){return!t||-1!==e.label.indexOf(t)},getNode:function(t,e){console.log(e),this.nodeValue=e,this.dialogVisible1=!0},getEditNode:function(t,e){console.log(e),this.nodeValue=e,this.editform.name=this.nodeValue.label,this.dialogVisible2=!0},renderContent:function(t,e){var a=this,n=e.node,o=e.data;e.store;return t("span",{class:"custom-tree-node"},[t("span",[t("i",{class:"el-icon-lx-tag",style:"margin-right:5px"}),n.label]),t("span",[t("i",{class:"el-icon-lx-roundadd",on:{click:function(){return a.getNode(n,o)}},style:"margin-right:2px"}),t("i",{class:"el-icon-lx-edit",style:"margin-right:2px",on:{click:function(){return a.getEditNode(n,o)}}}),t("i",{class:"el-icon-lx-roundclose",on:{click:function(){return a.remove(n,o)}}})])])},move:function(t){console.log(t),console.log(this.$refs.tree),this.label=t.name;for(var e=0;e<this.tags.length;e++)this.tags[e].name===t.name&&this.tags.splice(e,1);this.appendchild()},appendchild:function(){console.log(this.label);var t={id:this.num++,label:this.label,children:[]};this.data.push(t)},remove:function(t,e){var a=this;console.log(t),this.$confirm("确认要删除该标签吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(t){"confirm"==t&&(console.log("hh "),Object(s["postJsonRequest"])("/api/public/deleteLabels",e).then(function(t){console.log(t),200!=t.data.code?a.open6(t.data.msg):(a.open3(t.data.msg),a.reload())}).catch(function(t){}))}).catch(function(t){})},removeHandle:function(t){console.log(t),this.$message.success("从 ".concat(t.from.id," 移动到 ").concat(t.to.id," "))},handleDragStart:function(t,e){console.log("drag start",t)},handleDragEnter:function(t,e,a){},handleDragLeave:function(t,e,a){},handleDragOver:function(t,e,a){},handleDragEnd:function(t,e,a,n){var o=this;console.log("tree drag end: ",t.data.label,e.label,a);var i={oldNode:t.data.label,newNode:e.label,event:a};Object(s["postRequest"])("/api/public/dragLabel",i).then(function(t){200!=t.data.code?o.open6(t.data.msg):(o.open3(t.data.msg),o.reload())}).catch(function(t){})},handleDrop:function(t,e,a,n){},allowDrop:function(t,e,a){return"二级 3-1"!==e.data.label||"inner"!==a},allowDrag:function(t){return-1===t.data.label.indexOf("三级 3-2-2")}},mounted:function(){this.getAllTags(),this.getDocLabelsTree()}},r=d,c=(a("0518"),a("2877")),u=Object(c["a"])(r,n,o,!1,null,null,null);e["default"]=u.exports}}]);